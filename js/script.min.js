const canvas=document.getElementById('main-canvas'),context=canvas.getContext('2d'),r=800,cellW=canvas.clientWidth/r,cellH=canvas.clientHeight/r;let grid1=[],grid2=[];function initGrid(a){for(let b=0;b<r*r;b+=1)a[b]=~~(2*Math.random())}function initGame(){initGrid(grid1)}function rectangle(a,b,c,d,e){context.beginPath(),context.rect(a,b,c,d),context.fillStyle=e,context.fill(),context.closePath()}function clearCanvas(){context.clearRect(0,0,canvas.width,canvas.height)}function getNeighborSum(a,b){let c=0;return c+=a[b-r-1]||0,c+=a[b-r]||0,c+=a[b-r+1]||0,c+=a[b-1]||0,c+=a[b+1]||0,c+=a[b+r-1]||0,c+=a[b+r]||0,c+=a[b+r+1]||0,c}function computeNextGrid(a){grid2=[];for(let b=0;b<r*r;b+=1){const c=getNeighborSum(a,b);3===c?grid2[b]=1:2>c||3<c?grid2[b]=0:2===c&&(grid2[b]=a[b])}return grid2}function drawGrid(a){for(let b=0;b<r*r;b+=1)1===a[b]&&rectangle(b%r*cellW,~~(b/r)*cellH,cellW,cellH,'#FFFFFF')}function draw(){clearCanvas(),drawGrid(grid1),grid1=computeNextGrid(grid1)}function animate(){draw(),requestAnimationFrame(animate)}initGame(),animate();